
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>

    <!-- you may want to add your own keywords here, for search engine optimization -->
    <meta name="Keywords" content="INTRODUCTION TO ARTIFICIAL INTELLIGENCE, computer science, the hebrew university of jerusalem, project"/ >
    <link rel="stylesheet" type="text/css" href="http://www.cs.huji.ac.il/~ai/projects/2012/css/default.css" />      <!-- Don't change this line!-->
    <title>Bakery Quarrels - Backtrack versus WalkSAT</title>
</head>

<body>
<div class="main">
    <div class="gfx">
        <a href="http://www.cs.huji.ac.il/~ai/projects/" alt="Introduction to Artificial Intelligence The Hebrew University of Jerusalem"></a>  <!-- Don't change this line!-->
    </div>
    <div class="title">
        <h1>Bakery Quarrels - Backtrack versus WalkSAT </h1>
        <h4>Final project by </h4>
        <h3>
            <a href="ido.silverwater@cs.huji.ac.il" >Ido-Moshe Silverwater </a> &nbsp &nbsp
            <a href="noy.sternlicht@cs.huji.ac.il" > Noy Sternlicht  </a> &nbsp &nbsp
			<a href="jonathan.wiess@cs.huji.ac.il" > Jonathan Weiss  </a>
        </h3>
    </div>
   <hr>

    <div class="content">
    <h2>Introduction</h2>
        <p>
            In a workplace, such as a bakery shifts need to be manned. preferably taking the workers wishes into account.

            The workplace has a minimum and maximum amount of people needed in a shift, also the minimum amount of shifts
            a person has to work at each week.

            A worker has rest days (or sick days etc.) and preferred shifts during the week.
            <br>
            We can't always fill everyone's request, but we certainly determined to do our best.

        </p>
        <p>
            We are (naturally) going to solve this problem using CSP techniques we have
                learned in class.
        </p>

    <h2> Approach and Method </h2><p> First build a general case CSP solver, and then feed it with specific
                    problems (Specific problems would also entail implementing the supplied
                    interface).
                <h4>Worker shift satisfaction</h4>
                <p> There are a couple of different constraint types.
                    The first are hard constraints, these are constraints that must be satisfied,
                    In our case these are one to two people at each shift. The second is also a hard
                    constraint, That represents the workers rest days. Third is a soft constraints,
                    a constraint that we strive to satisfy but are not obligated to, these includes, for example, prefered shifts.</p>

                <p>We are going to try and solve this problem using a few algorithms:</p>
                <ul>
                    <li> Backtracking </li>
                    <li> WalkSAT (adjusted to our problem) </li>
                </ul>
                <h4> Backtracking </h4>
                    <p> The algorithm is greedy, in the sense that after it satisfies the hard constraints, it will
                        add the soft constraints one by one, if they are satisfied then we keep them otherwise we
                        dispose of them. Although we do this greedily we do use a heuristic, that might try to add them
                        in an order that will insure maximum fullfillment.</p>
                    <p>
                        The heuristics used here, are the heuristics for choosing what variable to satisfy at each step,
                        and domain heuristics two the best domain value to test.

                        After the satisfaction of the hard constraints, we have a heuristic to determine the best order
                        to try and satisfy the soft-constraint.
                    </p>
                <h4> WalkSAT </h4>
                    <p> All constraints are present from the very beginning (not adding one by one like the backtrack).
                        The WalkSAT will attempt to satisfy as many worker preferences as it can.</p>

	<h2> Results </h2>
        <p>

        We have ran many examples in order to compare between the two methods and test each method sepratly.

        Our main analysis was based on two randomly generated examples.
        </p>

        <h4> Backtrack results</h4>
            <p>
                We analyze the running time of the algorithm using the different heuristics.
                We don't mesure the amount of satisfied constraints as the function of the heurisitics used
                because one of the things our backtrack varient promises is that the hard constraints are all guarnteed
                to be satisfied. Therefore these results are not interesting.
            </p>

            <h5> Domain heuristics </h5>
            <p>
                The following diagram descirbes the median running time of the algorithm
                using the least constraining value vs. the minimum conflict heuristic.
               (median running time over the runs on both tests, with different parameters, such as different variable heuristics etc.)
            <img src="img/backtrack-domain-med.png" alt="funny chart" width="600" >
                We can see that the minimum conflict has a lower running time. therefore better.
            </p>
            <h5> Variable heuristics </h5>
            <p>
                Also for the variable heuristics we have presented a diagram of the running time as a function of the
                heuristic used. (degree heuristic and the minimum remaining value heuristic)

            <img src="img/backtrack-variable-med.png" alt="funny chart" width="600" >
                The minimum remaining value does a better job.
            </p>

            More comprehensive results are presented in the report. (More diagram. More explaining. More everything)

        <h4> WalkSAT results</h4>

            WalkSAT doesn't respect the difference between hard and soft constraints, both get the same treatment.

            In the WalkSAT results we try to find the effect of the different parameters on the run and the preformance of the algorithm.
            Performance here is the amount of satisfied constraints.
            WalkSAT's parameters are the amount of flips and the randomness variable (explore/exploit ratio).

            <h5>Flips</h5>
                TODO GIVE AN EXPLAINATION EXPLAINING THOSE MOST PECULIAR RESULTS
                <img src="img/walksat-flips.png" alt="funny chart" width="600" >

            <h5>Randomness</h5>
                And the effect of the randomness of the walksat algorithm (explore-explot ratio)
                <img src="img/walksat-random.png" alt="funny chart" width="600" >

            We can see here that the amount of random prefered here is 0. meaning that the greedy result is better for
        our specific problem and constraints (not many local minima, and even those who exist not that bad). but on other problems
        where it is easy to go into local minima this will not be true.

        <h4> Walksat vs. Backtrack</h4>
            Here we show the run of WalkSAT run compared to the run of Backtrack on 10 randomly generated
            tests.

            (WalkSAT - red
            Backtrack - blue)
            <img src="img/walksat-vs-backtrack.png" alt="funny chart" width="600" >

            Also the median of the percent satisfiefd for each of the tests.
            <img src="img/walksat-vs-backtrack-med.png" alt="funny chart" width="600" >

            We can clearly see that WalkSAT satisfies more constraints.

            But it's important to note that in contrast to Backtrack WalkSAT doesn't guarantee the satisfication
            of the hard constraints.

    <h2>Conclusions</h2>

        <p>
        Our goal was to create a constraint satisfaction solver, that will take workers preferences and the workplace needs.
        We created two algorithms that try to solve the same problem in different ways, and saw that each has a certain advantage.
        One guarntees the satisfaction of hard constraints, but satisfies less constraints overall. The other treats the
        hard as the soft, but satisfies more constraints overall.

            The algorithms had to be tweaked for our purposes so to actually work, as backtrack for example isn't built for
            satisfaction maximization, but for 100% satisfaction, something that isn't always possible in our scenrio, due to
            colliding intrests.
        </p>

        <p>

            TODO


        </p>

        <h2>Additional Information</h2>
    <p>
        <ul>
            <li><a href="files/report.pdf"> Link to the report (English or Hebrew)</a> <b>make sure that you haven't written your i.d. number or any other information that you don't want to be published!</b> </li>
            <!--
            If you wrote your report in English, change English or Hebrew to English. i.e, you should have the following line
            <li><a href="files/report.pdf"> Link to the report (English)</a>
            -->
             <li>  Any other link </li>
        </ul>
   </p>

   <h2>References</h2>
   <p>
   List any references from the literature you have consulted or used.
   </p>
   </div>

    <!-- *Don't* delete the below code, copyright issues...  -->
    <div class="footer">
        <span class="right"><a href="http://templates.arcsin.se/">Website template</a> by <a href="http://arcsin.se/">Arcsin</a>   </span>
   </div>
</div>
</body>
</html>
